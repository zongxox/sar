<?xml version="1.0" encoding="UTF-8"?>
<jasperReport
        name="taskSchedule0204"
        language="java"
        pageWidth="842" pageHeight="595"
        columnWidth="802"
        leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">

<!--直接連db查詢標籤-->
<!--    <queryString>-->
<!--        <![CDATA[-->
<!--        SELECT id, title, status-->
<!--        FROM task_schedule-->
<!--    ]]>-->
<!--    </queryString>-->

    <queryString><![CDATA[]]></queryString>

    <!-- fields：對應後端傳進來的每一筆資料欄位 -->
    <field name="id" class="java.lang.Long"/>
    <field name="title" class="java.lang.String"/>
    <field name="status" class="java.lang.String"/>
    <field name="type" class="java.lang.String"/>
    <field name="amount" class="java.lang.Integer"/>
    <field name="priority" class="java.lang.Integer"/>
    <field name="remark" class="java.lang.String"/>
    <field name="location" class="java.lang.String"/>
    <field name="startTimeStr" class="java.lang.String"/>
    <field name="endTimeStr" class="java.lang.String"/>
    <field name="pageGroup" class="java.lang.Integer"/>

<!--小計-->
    <variable name="amountGroupSum"
              class="java.lang.Long"
              resetType="Group"
              resetGroup="PageGroup"
              calculation="Sum">
        <variableExpression><![CDATA[$F{amount}]]></variableExpression>
    </variable>


<!--累計-->
    <variable name="amountRunningSum"
              class="java.lang.Long"
              resetType="Report"
              calculation="Sum">
        <variableExpression><![CDATA[$F{amount}]]></variableExpression>
    </variable>


<!--總計-->
    <variable name="amountTotal"
              class="java.lang.Long"
              resetType="Report"
              calculation="Sum">
        <variableExpression><![CDATA[$F{amount}]]></variableExpression>
    </variable>


    <!--換頁-->
    <group name="PageGroup"  isStartNewPage="true">
        <groupExpression><![CDATA[$F{pageGroup}]]></groupExpression>

        <groupFooter>
            <band height="37">

                <!-- 小計文字 -->
                <staticText>
                    <reportElement x="230" y="0" width="260" height="18"/>
                    <textElement>
                        <font fontName="NotoSansTC"
                              pdfFontName="fonts/NotoSansTC-Bold.ttf"
                              pdfEncoding="Identity-H"
                              isPdfEmbedded="true"/>
                    </textElement>
                    <text><![CDATA[小計:]]></text>
                </staticText>

                <!-- 小計金額 -->
                <textField pattern="#,##0">
                    <reportElement x="240" y="0" width="60" height="18"/>
                    <textElement textAlignment="Right">
                        <font fontName="NotoSansTC"
                              pdfFontName="fonts/NotoSansTC-Regular.ttf"
                              pdfEncoding="Identity-H"
                              isPdfEmbedded="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{amountGroupSum}]]></textFieldExpression>
                </textField>

                <!-- 累計文字（第二行） -->
                <staticText>
                    <reportElement x="230" y="18" width="260" height="18"/>
                    <textElement>
                        <font fontName="NotoSansTC"
                              pdfFontName="fonts/NotoSansTC-Bold.ttf"
                              pdfEncoding="Identity-H"
                              isPdfEmbedded="true"/>
                    </textElement>
                    <text><![CDATA[累計:]]></text>
                </staticText>

                <!-- 累計金額（第二行） -->
                <textField pattern="#,##0">
                    <reportElement x="240" y="18" width="60" height="18"/>
                    <textElement textAlignment="Right">
                        <font fontName="NotoSansTC"
                              pdfFontName="fonts/NotoSansTC-Regular.ttf"
                              pdfEncoding="Identity-H"
                              isPdfEmbedded="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{amountRunningSum}]]></textFieldExpression>
                </textField>
            </band>
        </groupFooter>
    </group>

<!--每一頁都顯示浮水印-->
    <background>
        <!-- 595 - 20(top) - 20(bottom) = 555 -->
        <band height="555">
            <image scaleImage="FillFrame">
                <reportElement x="0" y="0" width="842" height="555"/>
                <imageExpression><![CDATA[this.getClass().getResourceAsStream("/images/xxx.jpg")]]></imageExpression>
            </image>
        </band>
    </background>


<!--每一頁都顯示title-->
    <pageHeader>
        <band height="22">
            <textField>
                <reportElement x="0" y="2" width="400" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{location}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>


    <!--設置標題-->
    <columnHeader>
        <band height="18">

            <staticText>
                <reportElement x="0" y="0" width="30" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[id]]></text>
            </staticText>

            <staticText>
                <reportElement x="30" y="0" width="120" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[title]]></text>
            </staticText>

            <staticText>
                <reportElement x="150" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[status]]></text>
            </staticText>

            <staticText>
                <reportElement x="210" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[type]]></text>
            </staticText>

            <staticText>
                <reportElement x="270" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[amount]]></text>
            </staticText>

            <staticText>
                <reportElement x="330" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[priority]]></text>
            </staticText>

            <staticText>
                <reportElement x="390" y="0" width="120" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[remark]]></text>
            </staticText>

            <staticText>
                <reportElement x="510" y="0" width="70" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[location]]></text>
            </staticText>

            <staticText>
                <reportElement x="580" y="0" width="110" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[startTimeStr]]></text>
            </staticText>

            <staticText>
                <reportElement x="690" y="0" width="112" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          isBold="true"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[endTimeStr]]></text>
            </staticText>

        </band>
    </columnHeader>


    <!--資料列本身（每一筆資料顯示在哪、怎麼顯示）-->
    <detail> <!-- 明細區（每一筆資料都會跑一次） -->
        <band height="18"><!-- 每一列資料的高度 -->
            <!-- id -->
            <textField>
                <reportElement x="0" y="0" width="30" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>

            <!-- title -->
            <textField>
                <reportElement x="30" y="0" width="120" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{title}]]></textFieldExpression>
            </textField>

            <!-- status -->
            <textField>
                <reportElement x="150" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{status}]]></textFieldExpression>
            </textField>

            <!-- type -->
            <textField>
                <reportElement x="210" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{type}]]></textFieldExpression>
            </textField>

            <!-- amount -->
<!-- 千分位<textField pattern="#,##0">-->
            <textField pattern="#,##0">
                <reportElement x="270" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
            </textField>

            <!-- priority -->
            <textField>
                <reportElement x="330" y="0" width="60" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{priority}]]></textFieldExpression>
            </textField>

            <!-- remark -->
            <textField>
                <reportElement x="390" y="0" width="120" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{remark}]]></textFieldExpression>
            </textField>

            <!-- location -->
            <textField>
                <reportElement x="510" y="0" width="70" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{location}]]></textFieldExpression>
            </textField>

            <!-- startTime -->
            <textField>
                <reportElement x="580" y="0" width="110" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{startTimeStr}]]></textFieldExpression>
            </textField>



            <!-- endTime -->
            <textField>
                <reportElement x="690" y="0" width="112" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{endTimeStr}]]></textFieldExpression>
            </textField>

        </band>
    </detail>


    <pageFooter>                 <!-- 每一頁最底下的區塊（頁尾） -->
        <band height="0"/>       <!-- 高度 = 0，代表這一頁尾目前不顯示任何內容 -->
    </pageFooter>

    <summary>
        <band height="110">
            <staticText>
                <reportElement x="230" y="0" width="260" height="18"/>
                <textElement>
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Bold.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[總計]]></text>
            </staticText>

            <textField pattern="#,##0">
                <reportElement x="240" y="0" width="60" height="18"/>
                <textElement textAlignment="Right">
                    <font fontName="NotoSansTC"
                          pdfFontName="fonts/NotoSansTC-Regular.ttf"
                          pdfEncoding="Identity-H"
                          isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{amountTotal}]]></textFieldExpression>
            </textField>

<!--            <image>-->
<!--                &lt;!&ndash;圖片 y="25",height="80", =105,所以上面<band height="" 要設置到比105高&ndash;&gt;-->
<!--                <reportElement x="0" y="0" width="200" height="80"/>-->
<!--                &lt;!&ndash;圖片路徑 src >main >resources > images > xx.png&ndash;&gt;-->
<!--                <imageExpression><![CDATA[this.getClass().getResourceAsStream("/images/xxx.jpg")]]></imageExpression>-->
<!--            </image>-->
        </band>
    </summary>



</jasperReport>
